<?php

# Nom du fichier: home
# Auteur(s): D.JACOB 
# Copyright: (c) INRAE - 2015-2025
#

# Loading config file
require_once('inc/config/config.inc');
include ('inc/header.inc');

# Banner
$BANNER="An ecosystem for producing and sharing metadata";

# Left Panel
$links[0]="https://www.ouvrirlascience.fr/dmp-opidor-outil-pour-faciliter-la-redaction-de-plans-de-gestion-de-donnees/";
$links[1]="https://www.ouvrirlascience.fr/deuxieme-plan-national-pour-la-science-ouverte/";
$links[2]="https://recherche.data.gouv.fr/";
$links[3]="https://www.ouvrirlascience.fr/fair-principles/";
$links[4]="https://wp.u-picardie.fr/open-science/wp-content/uploads/sites/22/2021/07/Fiche-Synthetique-Metadonnees.pdf";
$links[5]="https://inrae.github.io/pgd-mmdt/tutorial/";

$HTMLTEXT = '
The <b>Maggot</b> tool allows users to describe the <a href="'.$links[4].'" target=\"_blank">Metadata</a> of their datasets produced within a collective (research unit, platform, multi-partner project, etc.), thus making it possible
<ul>
	<li>to answer certain questions of the <b>Data Management Plan</b> (<a href="'.$links[0].'" target="_blank">DMP</a>) concerning the <b>organization, documentation, storage and sharing of data</b> in the data storage space,</li>
	<li>to meet certain data and metadata requirements, referred to by the <a href="'.$links[1].'" target="_blank">National Plan for Open Science</a> , in particular its second axis: “<b>Structure, Share and Open Research Data</b>” (<a href="'.$links[2].'" target="_blank">Recherche Data Gouv</a>) in accordance with the <a href="'.$links[3].'" target="_blank">FAIR principles</a>.</li>
</ul>
See <a href="'.$links[5].'" target="_blank">Quick tutorial</a>.
';

# Right Panel
$options = [
    'option1' => ['active' => 1, 'label' => 'Configuration', 'url' => 'viewconf', 'icon' => 'gear', 'info' => '', 'row' => 1],
    'option2' => ['active' => 0, 'label' => 'Private access keys', 'url' => 'access', 'icon' => 'lock-fill', 'info' => '', 'row' => 1],
    'option3' => ['active' => 1, 'label' => 'Dictionaries', 'url' => 'dictionary', 'icon' => 'person', 'info' => '', 'row' => 2],
    'option4' => ['active' => 1, 'label' => 'Generate the metadata file', 'url' => 'entry', 'icon' => 'filetype-json', 'info' => '', 'row' => 3],
    'option5' => ['active' => 0, 'label' => 'Search datasets', 'url' => 'search', 'icon' => 'search', 'info' => '', 'row' => 3],
    'option6' => ['active' => 1, 'label' => 'File Browser', 'url' => '/fb/', 'icon' => 'card-list', 'info' => '', 'row' => 4],
    'option7' => ['active' => 1, 'label' => 'Push to Dataverse', 'url' => 'dataverse', 'icon' => 'flag-fill', 'info' => '', 'row' => 5],
    'option8' => ['active' => 0, 'label' => 'Push to Zenodo', 'url' => 'zenodo', 'icon' => 'flag', 'info' => '', 'row' => 5]
];

$options['option1']['info'] = 'Configure the terminology definition file';
$options['option2']['info'] = 'Manage private access keys';
$options['option3']['info'] = 'Edit the dictionaries (need admin access to edit or just use "maggot" user for viewing only)';
$options['option4']['info'] = 'Describe a dataset using metadata of different types by facilitating their entry and avoiding their re-entry thanks to personalized dictionaries, then generate the metadata file';
$options['option5']['info'] = 'Search datasets based on some metadata - assuming the metadata were previously deposited in the storage space';
$options['option6']['info'] = 'File Browser allows you to browse data directories using cloud-like software';
$options['option7']['info'] = 'Publish the metadata of datasets along with their data files into the Recherche Data Gouv repository';
$options['option8']['info'] = 'Publish the metadata of datasets along with their data files into the Zenodo repository';


# Group options by line
$grouped = [1 => [], 2 => [], 3 => [], 4 => [], 5 => []];
foreach ($options as $opt) {
    if ($opt['active'] && isset($opt['row'])) {
        $grouped[$opt['row']][] = $opt;
    }
}
?>

<!DOCTYPE html>
<html lang="fr">
<head>
  <title>Maggot - Home</title>
  <?php echo $HEAD ?>
  <style>
	.btn-primary { background-color: #fff; border-color: #fff; }
	.overlay_cl { top: 0px; padding: 20px; background-color: #fafafa; width: 500px; font-size: 20px; font-family: Arial; color: rgb(70, 130, 183); text-align: justify; display: none; position: absolute; border: solid 1px #555; box-shadow:  0 0 10px  rgba(0,0,0,0.6); -moz-box-shadow: 0 0 10px  rgba(0,0,0,0.6); -webkit-box-shadow: 0 0 10px  rgba(0,0,0,0.6); -o-box-shadow: 0 0 10px  rgba(0,0,0,0.6);}
	.box-home { min-width: 642px; min-height: 450px; }
	@media (min-width: 680px) { .container, .container-lg, .container-md, .container-sm, .container-xl, .container-xxl { max-width: 660px; } }
	.feature-box { min-height: unset; cursor: pointer; transition: transform 0.2s; }
	.feature-box:hover { transform: scale(1.03); }
	.card-body { padding: 0.35rem 0.65rem; }
	.row { --bs-gutter-x: 0.6rem; }
    .card-title { font-size: 1rem; color: #25318d;}
  </style>
  <script>
		var maxWidth=1200;
		$(document).ready(function() {
			$(window).on('resize', function(){ 
				$('#colitems').prop("rowspan", $( window ).width()>maxWidth ? 3 : -1 );
				$('#title').css('font-size', $( window ).width()>maxWidth ? '32px' : '28px' );
			});
			var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
			tooltipTriggerList.forEach(function (tooltipTriggerEl) {
				new bootstrap.Tooltip(tooltipTriggerEl)
			});
		});
  </script>
</head>
<body>

<body style="zoom: <?= $ZOOMWP ?>">
<?php echo $infolog; ?>
<div style="color: #557ca7; font-size: 20px;"><?= $menu1; ?></div>
<br>

<section>

<h1><img src="./docs/logo.svg?raw=true" alt="" title="Maggot" style="width:100px;"> &nbsp;&nbsp;&nbsp;&nbsp;<span id="title"><?= $MAINTITLE; ?></span></h1>
<br>

<div style="background-image: url(docs/Data-sharing-background.png); background-repeat: no-repeat; background-size: cover; padding: 20px 40px;"><center>
<font style="font-size:32px; color:white; font-weight: 700;"><?= $BANNER; ?></font>
</center>
</div>
<br><br>

<center>

<!-- Left panel -->
<div class="box-home box-home-first"><div style="padding: 35px;">
<font style="font-size:18px; color: #3b618a;"><?= $HTMLTEXT; ?></font>
</div></div>

<!-- Right box -->
<div class="box-home"><div style="padding: 20px;">

<div class="container">
  <?php foreach ($grouped as $row => $features): ?>
    <?php if (!empty($features)): ?>
      <div class="row mb-2 justify-content-center">
        <?php
          $count = count($features);
          $colWidth = intdiv(12, $count);
        ?>
        <?php foreach ($features as $opt): ?>
          <div class="col-12 col-md-<?= $colWidth ?> mb-0">
            <div class="card feature-box text-center shadow" onclick="location.href='<?= $opt['url'] ?>'">
              <div class="card-body">
                <div class="mb-0">
				<center>
                  <table><tr><td><i class="bi bi-<?= $opt['icon'] ?>" style="font-size: 2rem;"></i></td>
				  <td>&nbsp;</td>
                  <td><span class="card-title" data-bs-toggle="tooltip" data-bs-offset="150,-20" data-bs-placement="top" title="<?= htmlspecialchars($opt['info']) ?>">
                      <?= htmlspecialchars($opt['label']) ?></span></td></table>
                </center>
                </div>
              </div>
            </div>
          </div>
        <?php endforeach; ?>
      </div>
    <?php endif; ?>
  <?php endforeach; ?>
</div>

</div></div>

</center>
</section>

<br/><br/><br/><br/>

<?php
include ('inc/footer.inc');
?>


